<!DOCTYPE html>
<html>
<head>
  <title>Cancer Patient Recipes</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>

<body style="background-color: rgba(230, 125, 71, 0.5)">
<header>
<nav class="navbar bg-dark justify-content-center text-light" >
  	<span class="navbar-brand mb-0 h1">Recipes for Cancer Patients</span>
</nav>

</header>
<div class="container pt-4">
<form id="inclusion-form" action="" onsubmit="return false">
  <div class="row">
    <div class="col">
      <h3>Meal Types</h3>
  
    <input type="radio" id="type1" name="mealtype" value="Breakfast">
    <label for="type1">Breakfast</label><br>
  
    <input type="radio" id="type2" name="mealtype" value="Main Course">
    <label for="type2">Main Course</label><br>
  
    <input type="radio" id="type3" name="mealtype" value="Appetizer">
    <label for="type3">Appetizer</label><br>
  
    <input type="radio" id="type4" name="mealtype" value="Drink">
    <label for="type4">Drink</label><br>
    <br>

    <h3>Legumes</h3>

      <input type="checkbox" class = "Beans/Legumes" id="beans/legumes1" name="ingredients" value="Kidney Beans">
      <label for="beans/legumes1"> Kidney Beans</label><br>
  
      <input type="checkbox" class = "Beans/Legumes" id="beans/legumes3" name="ingredients" value="Chickpeas">
      <label for="beans/legumes3"> Chickpeas</label><br><br>

    </div>

    <div class="col">
      
        <h3>Vegetables</h3>
      <input type="checkbox" class = "Vegetable" id="vegetable1" name="ingredients" value="Spinach"  >
      <label for="vegetable1"> Spinach</label><br>
  
      <input type="checkbox" class = "Vegetable" id="vegetable2" name="ingredients" value="Lettuce">
      <label for="vegetable2"> Lettuce</label><br>
  
      <input type="checkbox" class = "Vegetable" id="vegetable3" name="ingredients" value="Broccoli">
      <label for="vegetable3"> Broccoli</label><br>
  
      <input type="checkbox" class = "Vegetable" id="vegetable4" name="ingredients" value="Kale">
      <label for="vegetable4"> Kale</label><br>
  
      <input type="checkbox" class = "Vegetable" id="vegetable5" name="ingredients" value="Celery">
      <label for="vegetable5"> Celery</label><br>
  
      <input type="checkbox" class = "Vegetable" id="vegetable6" name="ingredients" value="Carrots">
      <label for="vegetable6"> Carrots</label><br>
  
      <input type="checkbox" class = "Vegetable" id="vegetable7" name="ingredients" value="Onion">
      <label for="vegetable7"> Onion</label><br>
  
      <input type="checkbox" class = "Vegetable" id="vegetable8" name="ingredients" value="Cucumber">
      <label for="vegetable8"> Cucumber</label><br><br>


    </div>
    <div class="col">
      <h3>Dairy</h3>

      <input type="checkbox" class = "Dairy" id="dairy1" name="ingredients" value="Soy Milk">
      <label for="dairy1"> Soy Milk</label><br>
  
      <input type="checkbox" class = "Dairy" id="dairy2" name="ingredients" value="Yogurt">
      <label for="dairy2"> Yogurt</label><br><br>

      <h3>Protein</h3>
  
      <input type="checkbox" class = "Protein" id="protein1" name="ingredients" value="Tofu">
      <label for="protein1">Tofu</label><br>
  
      <input type="checkbox" class = "Protein" id="protein2" name="ingredients" value="Eggs">
      <label for="protein2">Eggs</label><br>
  
    <input type="checkbox" class = "Protein" id="protein3" name="ingredients" value="Salmon">
      <label for="protein3">Salmon</label><br>
  
      <input type="checkbox" class = "Protein" id="protein4" name="ingredients" value="Mackerel">
      <label for="protein4">Mackerel</label><br>

    </div>

    <div class="col">
      <h3>Grains</h3>
  
      <input type="checkbox" class = "Grains" id="grains1" name="ingredients" value="Rice">
      <label for="grains1">Rice</label><br>
  
      <input type="checkbox" class = "Grains" id="grains2" name="ingredients" value="Oats">
      <label for="grains2">Oats</label><br>
  
      <input type="checkbox" class = "Grains" id="grains3" name="ingredients" value="Corn">
      <label for="grains3">Corn</label><br><br>

      <h3>Other</h3>
  
      <input type="checkbox" class = "Other" id="other1" name="ingredients" value="Ginger">
      <label for="other1">Ginger</label><br>
  
      <input type="checkbox" class = "Other" id="other2" name="ingredients" value="Kimchi">
      <label for="other2">Kimchi</label><br>
  
      <input type="checkbox" class = "Other" id="other3" name="ingredients" value="Parsley">
      <label for="other3">Parsley</label><br>
  
      <input type="checkbox" class = "Other" id="other4" name="ingredients" value="Thyme">
      <label for="other4">Thyme</label><br>
    </div>

  </div>
  <div class="row">
    <div class="col align-self-center">
  		<button type="button" class="btn btn-dark" onclick = "check();">Filter</button>
  </form>
  </div>
</div>

  <div class="row">
    <div class="col">
      <div id = "output0"></div>
      <font size="5em">
  <a href = "" id = "sourceLink0" style="text-decoration: none"></a><br>
    </font>
    </div>
    <div class="col">
      <div id = "output1"></div>
      <font size="5em">
  <a href = "" id = "sourceLink1" style="text-decoration: none"></a><br>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div id = "output2"></div>
      <font size="5em">
  <a href = "" id = "sourceLink2" style="text-decoration: none"></a><br>
  </font>
    </div>
    <div class="col">
      <div id = "output3"></div>
      <font size="5em">
  <a href = "" id = "sourceLink3" style="text-decoration: none"></a><br>
  </font>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div id = "output4"></div>
      <font size="5em">
  <a href = "" id = "sourceLink4" style="text-decoration: none"></a><br>
  </font>
    </div>
    <div class="col">
      <div id = "output5"></div>
      <font size="5em">
  <a href = "" id = "sourceLink5" style="text-decoration: none"></a><br>
  </font>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div id = "output6"></div>
      <font size="5em">
  <a href = "" id = "sourceLink6" style="text-decoration: none"></a><br>
  </font>
    </div>
    <div class="col">
      <div id = "output7"></div>
      <font size="5em">
  <a href = "" id = "sourceLink7" style="text-decoration: none"></a><br>
  </font>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div id = "output8"></div>
      <font size="5em">
  <a href = "" id = "sourceLink8" style="text-decoration: none"></a><br>
  </font>
    </div>
    <div class="col">
      <div id = "output9"></div>
      <font size="5em">
  <a href = "" id = "sourceLink9" style="text-decoration: none"></a><br>
  </font>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div id = "output10"></div>
      <font size="5em">
  <a href = "" id = "sourceLink10" style="text-decoration: none"></a><br>
  </font>
    </div>
    <div class="col">
      <div id = "output11"></div>
      <font size="5em">
  <a href = "" id = "sourceLink11" style="text-decoration: none"></a><br>
  </font>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div id = "output12"></div>
      <font size="5em">
  <a href = "" id = "sourceLink12" style="text-decoration: none"></a><br>
  </font>
    </div>
    <div class="col">
      <div id = "output13"></div>
      <font size="5em">
  <a href = "" id = "sourceLink13" style="text-decoration: none"></a><br>
  </font>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div id = "output14"></div>
      <font size="5em">
  <a href = "" id = "sourceLink14" style="text-decoration: none"></a><br>
  </font>
    </div>
    <div class="col">
      <div id = "output15"></div>
      <font size="5em">
  <a href = "" id = "sourceLink15" ></a><br>
  </font>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

<script src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!--  <input id = "search"><button onclick = "getrecipe(document.getElementById('search').value)">Search</button> -->
  <script>

  function check(){
    var myArray = [];
    var mealtype="";
    var check = document.getElementsByName("ingredients");
    for (let ingredient of check){
    if (ingredient.checked==true){
      myArray.push(ingredient.value);
      ingredient.checked = true;â€©
    }
  
    
  }
  var type = document.getElementsByName("mealtype");
  for (let types of type){
    if (types.checked==true){
      mealtype=types.value;
      
    }
  }
getrecipe(myArray, mealtype.toLowerCase());

  }


  function getrecipe(arr, type){
  //This function makes API requests that fetch recipes based on specifications of meal type and ingredients.

  //This snippet of code takes all of the different ingredients that were checked off from an array and puts it into a string that is formatted for the API request 
    var string="";
  
    for (ingredient in arr){
      string+=arr[ingredient];
      string+=",";
    }

    string=string.substring(0,string.length-1);
    string=string.toLowerCase();
    var count = 0;

    //In this block of code, we make two API requests which return the recipe's title, image, and source URL.
    $.ajax({
      url: "https://api.spoonacular.com/recipes/complexSearch?apiKey=dcc071e29c6f4a50a1d0de302564fde4&number=16&includeIngredients=" + string+"&type="+type,
      success: function(res){
        var outputs=[];
        var arr_href=[];
        console.log(res.results);
        if (res.results.length==0){
          document.getElementById("output0").innerHTML="<br><h3> Sorry! There are no recipes that match your specifications. </hr><br>";
        }
        for (num in res.results){
          console.log(num);
          var out = "<h1>"+res.results[num].title+"</h1><br><img src='" + res.results[num].image + "' width='400' />";
      
          var url="";
          document.getElementById("output"+num).innerHTML=out;
          $.ajax({
            url: "https://api.spoonacular.com/recipes/" + res.results[num].id + 
            "/information?apiKey=dcc071e29c6f4a50a1d0de302564fde4",
            success: function(res){
        
              url= "" + res.sourceUrl;
      
              
              document.getElementById("sourceLink"+count).innerHTML="Quick Link";
              document.getElementById("sourceLink"+count).href=url;
              count+=1;
        
            }
        
          
      
        });
      }
      
    }
  });
}

    
  </script>

</body>
</html>


